<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    {% load static %}
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center mt-8 mb-8">
    <div class="bg-white p-6 rounded shadow w-full max-w-md space-y-4">
        <h1 class="text-2xl font-bold text-center text-blue-600">Create Account</h1>

        <form method="post" class="space-y-4">
            {% csrf_token %}
            {% for field in form %}
                <div>
                    <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <p class="text-red-500 text-sm">{{ field.errors|striptags }}</p>
                    {% endif %}
                </div>
            {% endfor %}
            <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
                Sign Up
            </button>
        </form>

        {% for message in messages %}
            <p class="bg-green-500 text-white p-2 rounded text-center">{{ message }}</p>
        {% endfor %}

        <p class="text-sm text-center text-gray-600">
            Already have an account?
            <a href="{% url 'login' %}" class="text-blue-600 hover:underline">Login</a>
        </p>
    </div>

    <!-- Disable submit button script -->
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const forms = document.querySelectorAll("form");

        forms.forEach(form => {
            form.addEventListener("submit", () => {
                const btn = form.querySelector("button[type='submit']");
                if (btn) {
                    btn.disabled = true;
                    btn.innerHTML = `<span class="animate-spin inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"></span>Processing...`;
                    btn.classList.add("opacity-50", "cursor-not-allowed");
                }
            });
        });
    });
    </script>

</body>
</html>
